define("local_coursegoals/coursegoals",["exports","core_form/modalform","core/str","core/notification"],(function(_exports,_modalform,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setupModals=_exports.initCourseGoalsTab=void 0,_modalform=_interopRequireDefault(_modalform),_notification=_interopRequireDefault(_notification);_exports.initCourseGoalsTab=function(parentelement){try{var cg_tab=document.querySelector("#cg_goals_tab"),cg_parentnodes=parentelement.split(",");for(var i in cg_parentnodes){var cg_pageheader=document.querySelector(cg_parentnodes[i]);if(cg_pageheader){cg_pageheader.appendChild(cg_tab);break}}var cg_details_node=document.getElementById("cg_details_maintab"),cg_localDetailsAreOpen=window.localStorage.getItem("details-cg_details_maintab");"true"!=cg_localDetailsAreOpen&&null!=cg_localDetailsAreOpen||cg_details_node.setAttribute("open","true"),cg_tab.style.display="block",cg_details_node.addEventListener("toggle",(function(e){var isOpen=event.target.getAttribute("open");window.localStorage.setItem("details-cg_details_maintab","string"==typeof isOpen?"true":"false")}))}catch(ignore){}};_exports.setupModals=function(modals){modals.forEach((function(modaldata){document.querySelectorAll(modaldata.elementSelector).forEach((function(element){element.addEventListener("click",(function(e){var title=this.getAttribute("data-title")||this.innerHTML,formClass=modaldata.formClass,dataID=this.getAttribute("data-id")||null,dataParentID=this.getAttribute("data-parentid")||null,action=this.getAttribute("data-action")||null,form=new _modalform.default({formClass:formClass,args:{action:action,dataid:dataID,dataparentid:dataParentID},modalConfig:{title:title,large:!0},saveButtonText:title,returnFocus:e.target});form.addEventListener(form.events.FORM_SUBMITTED,(function(event){event.detail.result?(event.detail.returnaction,event.detail.redirecturl?document.location=event.detail.redirecturl:window.location.reload()):_notification.default.addNotification({type:"error",message:event.detail.errors.join("<br>")})})),form.show()}))}))}))}}));

//# sourceMappingURL=coursegoals.min.js.map